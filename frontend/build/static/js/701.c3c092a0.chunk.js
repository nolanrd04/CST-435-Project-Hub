"use strict";(self.webpackChunkweek8_tuesday=self.webpackChunkweek8_tuesday||[]).push([[701],{701:(e,t,s)=>{s.d(t,{default:()=>h});var n=s(555),a=s(43),i=s(722);const r=new class{constructor(){this.api=void 0,this.baseURL=void 0,this.baseURL="local"===localStorage.getItem("API_MODE")?"http://localhost:8000":"https://cst-435-project-hub.onrender.com",this.api=i.A.create({baseURL:this.baseURL,headers:{"Content-Type":"application/json"}})}async initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"ABCDEFGHIJKLMNOPQRSTUVWXYZ ";try{return(await this.api.post("/projectGA/initialize",{target:e,population_size:t,mutation_rate:s,crossover_rate:n,elitism_count:a,tournament_size:i,charset:r})).data}catch(l){throw this.handleError(l)}}async evolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{return(await this.api.post("/projectGA/evolve/".concat(e),{generations:t})).data}catch(s){throw this.handleError(s)}}async getStatus(e){try{return(await this.api.get("/projectGA/status/".concat(e))).data}catch(t){throw this.handleError(t)}}async getPopulation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;try{return(await this.api.get("/projectGA/population/".concat(e),{params:{top_n:t}})).data}catch(s){throw this.handleError(s)}}async getHistory(e){try{return(await this.api.get("/projectGA/history/".concat(e))).data}catch(t){throw this.handleError(t)}}async reset(e){try{return(await this.api.post("/projectGA/reset/".concat(e))).data}catch(t){throw this.handleError(t)}}async deleteSession(e){try{return(await this.api.delete("/projectGA/session/".concat(e))).data}catch(t){throw this.handleError(t)}}async getQuotes(){try{return(await this.api.get("/projectGA/quotes")).data}catch(e){throw this.handleError(e)}}handleError(e){if(i.A.isAxiosError(e)){var t;if(e.response)return new Error((null===(t=e.response.data)||void 0===t?void 0:t.detail)||e.message||"API Error");if(e.request)return new Error("No response from server")}return e instanceof Error?e:new Error("Unknown error occurred")}};var l=s(579);const o=e=>{let{onStart:t,onStop:s,onReset:n,isRunning:i,isComplete:o}=e;const[c,d]=(0,a.useState)("TO BE OR NOT TO BE"),[h,u]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1),[v,m]=(0,a.useState)([]),[x,j]=(0,a.useState)(!0),[f,b]=(0,a.useState)(200),[N,y]=(0,a.useState)(.01),[A,w]=(0,a.useState)(.8),[S,E]=(0,a.useState)(2),[_,C]=(0,a.useState)(5);(0,a.useEffect)(()=>{(async()=>{try{const e=await r.getQuotes();m(e.quotes),j(!1)}catch(e){console.error("Failed to load quotes:",e),j(!1)}})()},[]);return(0,l.jsxs)("div",{className:"control-panel",children:[(0,l.jsxs)("div",{className:"control-section",children:[(0,l.jsx)("h3",{children:"Target Phrase"}),(0,l.jsxs)("div",{className:"quote-selector",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",checked:!g,onChange:()=>p(!1)}),"Select Shakespeare Quote"]}),(0,l.jsx)("select",{value:c,onChange:e=>d(e.target.value),disabled:g||x,children:x?(0,l.jsx)("option",{children:"Loading quotes..."}):v.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),(0,l.jsxs)("div",{className:"custom-phrase",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",checked:g,onChange:()=>p(!0)}),"Custom Phrase"]}),(0,l.jsx)("input",{type:"text",value:h,onChange:e=>u(e.target.value.toUpperCase()),placeholder:"Enter your target phrase...",disabled:!g,maxLength:50})]})]}),(0,l.jsxs)("div",{className:"control-section",children:[(0,l.jsx)("h3",{children:"GA Parameters"}),(0,l.jsxs)("div",{className:"parameter",children:[(0,l.jsxs)("label",{children:["Population Size: ",(0,l.jsx)("strong",{children:f})]}),(0,l.jsx)("input",{type:"range",min:"10",max:"500",step:"10",value:f,onChange:e=>b(parseInt(e.target.value)),disabled:i}),(0,l.jsx)("span",{className:"hint",children:"10 - 500"})]}),(0,l.jsxs)("div",{className:"parameter",children:[(0,l.jsxs)("label",{children:["Mutation Rate: ",(0,l.jsx)("strong",{children:N.toFixed(3)})]}),(0,l.jsx)("input",{type:"range",min:"0",max:"0.1",step:"0.001",value:N,onChange:e=>y(parseFloat(e.target.value)),disabled:i}),(0,l.jsx)("span",{className:"hint",children:"0.000 - 0.100"})]}),(0,l.jsxs)("div",{className:"parameter",children:[(0,l.jsxs)("label",{children:["Crossover Rate: ",(0,l.jsx)("strong",{children:A.toFixed(2)})]}),(0,l.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:A,onChange:e=>w(parseFloat(e.target.value)),disabled:i}),(0,l.jsx)("span",{className:"hint",children:"0.00 - 1.00"})]}),(0,l.jsxs)("div",{className:"parameter",children:[(0,l.jsxs)("label",{children:["Elitism Count: ",(0,l.jsx)("strong",{children:S})]}),(0,l.jsx)("input",{type:"range",min:"0",max:"20",step:"1",value:S,onChange:e=>E(parseInt(e.target.value)),disabled:i}),(0,l.jsx)("span",{className:"hint",children:"0 - 20"})]}),(0,l.jsxs)("div",{className:"parameter",children:[(0,l.jsxs)("label",{children:["Tournament Size: ",(0,l.jsx)("strong",{children:_})]}),(0,l.jsx)("input",{type:"range",min:"2",max:"20",step:"1",value:_,onChange:e=>C(parseInt(e.target.value)),disabled:i}),(0,l.jsx)("span",{className:"hint",children:"2 - 20"})]})]}),(0,l.jsxs)("div",{className:"control-section button-group",children:[(0,l.jsx)("button",{className:"btn btn-primary",onClick:()=>{const e=g?h.toUpperCase():c;if(!e.trim())return void alert("Please enter a target phrase");t(e,{population_size:f,mutation_rate:N,crossover_rate:A,elitism_count:S,tournament_size:_})},disabled:i||o,children:i?"Running...":"Start Evolution"}),(0,l.jsx)("button",{className:"btn btn-danger",onClick:s,disabled:!i,children:"Stop"}),(0,l.jsx)("button",{className:"btn btn-secondary",onClick:n,disabled:i,children:"Reset"})]}),o&&(0,l.jsx)("div",{className:"status-complete",children:"\u2705 Evolution Complete!"})]})},c=e=>{let{population:t,target:s,generation:n,bestEver:a,averageFitness:i,isComplete:r}=e;const o=e=>(0,l.jsx)("div",{className:"gene-display",children:e.split("").map((e,t)=>{const n=t<s.length&&e===s[t];return(0,l.jsx)("span",{className:"gene-char ".concat(n?"match":"mismatch"),title:n?"\u2713 Matches '".concat(s[t],"'"):"\u2717 Should be '".concat(s[t],"'"),children:e},t)})});return(0,l.jsxs)("div",{className:"population-display",children:[(0,l.jsxs)("div",{className:"header-info",children:[(0,l.jsxs)("div",{className:"info-card",children:[(0,l.jsx)("div",{className:"info-label",children:"Generation"}),(0,l.jsx)("div",{className:"info-value",children:n})]}),(0,l.jsxs)("div",{className:"info-card",children:[(0,l.jsx)("div",{className:"info-label",children:"Best Fitness"}),(0,l.jsxs)("div",{className:"info-value",children:[(null===a||void 0===a?void 0:a.fitness.toFixed(2))||0,"%"]})]}),(0,l.jsxs)("div",{className:"info-card",children:[(0,l.jsx)("div",{className:"info-label",children:"Avg Fitness"}),(0,l.jsxs)("div",{className:"info-value",children:[i.toFixed(2),"%"]})]}),(0,l.jsxs)("div",{className:"info-card",children:[(0,l.jsx)("div",{className:"info-label",children:"Population"}),(0,l.jsx)("div",{className:"info-value",children:t.length})]})]}),(0,l.jsxs)("div",{className:"target-section",children:[(0,l.jsx)("h3",{children:"Target"}),(0,l.jsx)("div",{className:"target-phrase",children:s})]}),(0,l.jsxs)("div",{className:"best-individual-section",children:[(0,l.jsx)("h3",{children:"Best Individual"}),a?(0,l.jsxs)("div",{className:"best-individual",children:[(0,l.jsxs)("div",{className:"best-fitness-bar",children:[(0,l.jsx)("div",{className:"fitness-fill",style:{width:"".concat(a.fitness,"%")}}),(0,l.jsxs)("span",{className:"fitness-text",children:[a.fitness.toFixed(2),"%"]})]}),o(a.genes)]}):(0,l.jsx)("div",{className:"no-data",children:"No individual yet"})]}),(0,l.jsxs)("div",{className:"population-section",children:[(0,l.jsx)("h3",{children:"Top 20 Individuals"}),(0,l.jsx)("div",{className:"population-list",children:0===t.length?(0,l.jsx)("div",{className:"no-data",children:"No population data"}):t.map((e,t)=>(0,l.jsxs)("div",{className:"population-item",children:[(0,l.jsxs)("div",{className:"item-rank",children:["#",t+1]}),(0,l.jsxs)("div",{className:"item-fitness-bar",children:[(0,l.jsx)("div",{className:"fitness-fill",style:{width:"".concat(e.fitness,"%")}}),(0,l.jsxs)("span",{className:"fitness-text",children:[e.fitness.toFixed(2),"%"]})]}),(0,l.jsx)("div",{className:"item-genes",children:o(e.genes)})]},t))})]})]})},d=e=>{let{data:t}=e;const s=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!s.current||0===t.length)return;const e=s.current,n=e.getContext("2d");if(!n)return;const a=60,i=e.width-120,r=e.height-120;n.fillStyle="#f5f5f5",n.fillRect(0,0,e.width,e.height),n.strokeStyle="#ddd",n.lineWidth=1;for(let t=0;t<=10;t++){const s=a+r*t/10;n.beginPath(),n.moveTo(a,s),n.lineTo(e.width-a,s),n.stroke(),n.fillStyle="#666",n.font="12px Arial",n.textAlign="right",n.fillText("".concat(100-10*t,"%"),50,s+4)}if(n.strokeStyle="#333",n.lineWidth=2,n.beginPath(),n.moveTo(a,a),n.lineTo(a,e.height-a),n.lineTo(e.width-a,e.height-a),n.stroke(),n.fillStyle="#333",n.font="14px Arial",n.textAlign="center",n.fillText("Generation",e.width/2,e.height-20),n.save(),n.translate(20,e.height/2),n.rotate(-Math.PI/2),n.textAlign="center",n.fillText("Fitness (%)",0,0),n.restore(),t.length<2)return;const l=t[t.length-1].generation||1,o=i/Math.max(l,1);n.strokeStyle="#4CAF50",n.lineWidth=2,n.beginPath(),t.forEach((t,s)=>{const i=a+((t.generation-1)*o||0),l=e.height-a-t.best_fitness/100*r;0===s?n.moveTo(i,l):n.lineTo(i,l)}),n.stroke(),n.strokeStyle="#2196F3",n.lineWidth=2,n.beginPath(),t.forEach((t,s)=>{const i=a+((t.generation-1)*o||0),l=e.height-a-t.average_fitness/100*r;0===s?n.moveTo(i,l):n.lineTo(i,l)}),n.stroke(),n.fillStyle="#4CAF50",n.fillRect(e.width-200,20,12,12),n.fillStyle="#333",n.font="12px Arial",n.textAlign="left",n.fillText("Best Fitness",e.width-180,28),n.fillStyle="#2196F3",n.fillRect(e.width-200,40,12,12),n.fillStyle="#333",n.fillText("Average Fitness",e.width-180,48)},[t]),(0,l.jsxs)("div",{className:"fitness-chart",children:[(0,l.jsx)("h3",{children:"Evolution Progress"}),(0,l.jsx)("canvas",{ref:s,width:800,height:400,className:"chart-canvas"}),0===t.length&&(0,l.jsx)("div",{className:"no-data-message",children:"Run evolution to see chart data"})]})},h=()=>{const[e,t]=(0,a.useState)({sessionId:null,isInitialized:!1,isRunning:!1,isComplete:!1,generation:0,population:[],target:"",bestIndividual:null,averageFitness:0,bestFitness:0,historyData:[],error:null}),s=(0,a.useRef)(null),i=(0,a.useRef)(!1),h=(0,a.useRef)(e);(0,a.useEffect)(()=>{h.current=e},[e]);(0,a.useEffect)(()=>{if(!e.isRunning||!e.sessionId)return;let a=!0,l=0;return s.current=setInterval(async()=>{if(!i.current&&a){i.current=!0;try{const e=h.current;console.log("\ud83e\uddec Starting evolution step at generation ".concat(e.generation,"..."));const o=await r.evolve(e.sessionId,50);if(!a)return;console.log("\u2705 Evolution step completed",{generation:o.generation,bestFitness:o.best_fitness,generationsEvolved:o.generations_evolved,isComplete:o.is_complete});const c=await r.getStatus(e.sessionId);if(!a)return;console.log("\ud83d\udcca Status:",c);const d=await r.getPopulation(e.sessionId,20),u=await r.getHistory(e.sessionId);if(!a)return;console.log("\ud83d\udcc8 Generation ".concat(c.generation,", Fitness: ").concat(c.best_fitness,"%")),t(e=>(0,n.A)((0,n.A)({},e),{},{generation:c.generation,bestIndividual:{genes:c.best_individual,fitness:c.best_fitness},averageFitness:c.average_fitness,bestFitness:c.best_fitness,population:d.top_individuals,historyData:u.history,isComplete:c.is_complete,isRunning:!c.is_complete})),l=0,c.is_complete?(console.log("\ud83c\udf89 GA completed!"),i.current=!1,s.current&&(clearInterval(s.current),s.current=null)):i.current=!1}catch(e){if(!a)return;l++,console.error("\u274c Evolution error (".concat(l,"):"),e);const r=e instanceof Error?e.message:"Evolution error";t(e=>(0,n.A)((0,n.A)({},e),{},{error:"".concat(r," (attempt ").concat(l,")"),isRunning:!1})),i.current=!1,l>=3&&s.current&&(clearInterval(s.current),s.current=null)}}},500),()=>{a=!1,s.current&&(clearInterval(s.current),s.current=null)}},[e.isRunning,e.sessionId]);return(0,l.jsxs)("div",{className:"ga-page",children:[(0,l.jsxs)("div",{className:"ga-header",children:[(0,l.jsx)("h1",{children:"Genetic Algorithm"}),(0,l.jsx)("p",{children:"Evolve random text into Shakespeare quotes"})]}),e.error&&(0,l.jsxs)("div",{className:"error-message",children:[(0,l.jsx)("strong",{children:"Error:"})," ",e.error]}),(0,l.jsxs)("div",{className:"ga-container",children:[(0,l.jsx)("div",{className:"ga-left",children:(0,l.jsx)(o,{onStart:async(e,s)=>{try{console.log('\ud83d\ude80 Starting GA with target: "'.concat(e,'", config:'),s),t(e=>(0,n.A)((0,n.A)({},e),{},{error:null}));const a=await r.initialize(e,s.population_size,s.mutation_rate,s.crossover_rate,s.elitism_count,s.tournament_size);t(e=>(0,n.A)((0,n.A)({},e),{},{sessionId:a.session_id,isInitialized:!0,isRunning:!0,isComplete:!1,generation:0,target:a.target,bestIndividual:{genes:a.best_individual,fitness:a.best_fitness},averageFitness:a.average_fitness,bestFitness:a.best_fitness,historyData:[]}))}catch(a){const e=a instanceof Error?a.message:"Failed to initialize GA";t(t=>(0,n.A)((0,n.A)({},t),{},{error:e,isRunning:!1}))}},onStop:()=>{t(e=>(0,n.A)((0,n.A)({},e),{},{isRunning:!1})),s.current&&clearInterval(s.current),i.current=!1},onReset:async()=>{if(e.sessionId)try{await r.reset(e.sessionId),t(e=>(0,n.A)((0,n.A)({},e),{},{isInitialized:!1,isRunning:!1,isComplete:!1,generation:0,population:[],target:"",bestIndividual:null,averageFitness:0,bestFitness:0,historyData:[],error:null}))}catch(s){const e=s instanceof Error?s.message:"Reset failed";t(t=>(0,n.A)((0,n.A)({},t),{},{error:e}))}},isRunning:e.isRunning,isComplete:e.isComplete})}),(0,l.jsxs)("div",{className:"ga-right",children:[(0,l.jsx)(c,{population:e.population,target:e.target,generation:e.generation,bestEver:e.bestIndividual,averageFitness:e.averageFitness,isComplete:e.isComplete}),(0,l.jsx)(d,{data:e.historyData})]})]})]})}}}]);
//# sourceMappingURL=701.c3c092a0.chunk.js.map